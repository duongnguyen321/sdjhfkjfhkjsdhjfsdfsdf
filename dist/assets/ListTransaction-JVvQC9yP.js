import{c as T}from"./index-CdjHlNDK.js";import{_ as b,c as w,e as a,w as o,h as r,o as V,i as d,d as k,t as y}from"./index-QQhhOUTB.js";const C=async()=>{try{return(await T.get("/transaction")).data}catch(e){throw new Error(e.response.data.message||e.message)}},N=async e=>{try{return(await T.post("/transaction",e)).data}catch(t){throw new Error(t.response.data.message||t.message)}},E=async(e,t)=>{try{return(await T.post(`/transaction/${e}`,t)).data}catch(m){throw new Error(m.response.data.message||m.message)}},v=async e=>{try{return(await T.delete(`/transaction/${e}`)).data}catch(t){throw new Error(t.response.data.message||t.message)}},L={data(){return{dialogTransaction:!1,dataTransaction:{userName:"",content:"",feedback:"",time:""},dataListTransaction:[],isEditForm:!1}},created(){this.getListTransaction()},methods:{openDialogTransaction(e,t){this.isEditForm=e,this.dialogTransaction=!0,t.length!==0?this.dataTransaction={...t}:this.dataTransaction={name:"",icon:"",bin:null,accountNumber:"",userName:"",status:null,bankBalance:null}},updateTransaction(){this.dialogTransaction=!1,E(this.dataTransaction._id,this.dataTransaction).then(()=>{this.$message.success("Cập nhật thành công"),this.getListTransaction()})},addTransaction(){this.dialogTransaction=!1,N(this.dataTransaction).then(()=>{this.$message.success("Thêm thành công"),this.getListTransaction()})},getListTransaction(){C().then(e=>{this.dataListTransaction=e})},deleteTransaction(e){v(e._id).then(()=>{this.$message.success("Xóa thành công"),this.getListTransaction()})}}},x={class:"over pt-8"},F={class:"dialog-footer"};function U(e,t,m,D,n,i){const l=r("el-button"),c=r("el-table-column"),h=r("el-table"),u=r("el-input"),p=r("el-form-item"),g=r("el-form"),f=r("el-dialog");return V(),w("div",x,[a(l,{onClick:t[0]||(t[0]=s=>i.openDialogTransaction(!1,""))},{default:o(()=>[d("Thêm Transaction")]),_:1}),a(h,{data:n.dataListTransaction,style:{width:"100%"},class:"mt-4",border:!0},{default:o(()=>[a(c,{prop:"userName",label:"Tên user"}),a(c,{prop:"content",label:"Nội dung mua/bán"}),a(c,{prop:"feedback",label:"Đánh giá"}),a(c,{prop:"time",label:"Thời gian  giao dịch"}),a(c,{label:"Thao tác","min-width":"150px"},{default:o(s=>[a(l,{onClick:_=>i.openDialogTransaction(!0,s.row)},{default:o(()=>[d(" Sửa ")]),_:2},1032,["onClick"]),a(l,{onClick:_=>i.deleteTransaction(s.row)},{default:o(()=>[d(" Xóa ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(f,{modelValue:n.dialogTransaction,"onUpdate:modelValue":t[7]||(t[7]=s=>n.dialogTransaction=s),title:n.isEditForm?"Sửa thông tin":"Thêm mới",style:{"max-width":"500px"},width:"auto"},{footer:o(()=>[k("div",F,[a(l,{onClick:t[5]||(t[5]=s=>n.dialogTransaction=!1)},{default:o(()=>[d("Cancel")]),_:1}),a(l,{type:"primary",onClick:t[6]||(t[6]=s=>n.isEditForm?i.updateTransaction():i.addTransaction())},{default:o(()=>[d(y(n.isEditForm?"Cập nhật":"Xác nhận"),1)]),_:1})])]),default:o(()=>[a(g,{"label-width":"auto",class:"demo-ruleForm mt-4"},{default:o(()=>[a(p,{label:"Tên giao dịch"},{default:o(()=>[a(u,{modelValue:n.dataTransaction.userName,"onUpdate:modelValue":t[1]||(t[1]=s=>n.dataTransaction.userName=s)},null,8,["modelValue"])]),_:1}),a(p,{label:"Nội dung"},{default:o(()=>[a(u,{modelValue:n.dataTransaction.content,"onUpdate:modelValue":t[2]||(t[2]=s=>n.dataTransaction.content=s)},null,8,["modelValue"])]),_:1}),a(p,{label:"Đánh giá"},{default:o(()=>[a(u,{modelValue:n.dataTransaction.feedback,"onUpdate:modelValue":t[3]||(t[3]=s=>n.dataTransaction.feedback=s)},null,8,["modelValue"])]),_:1}),a(p,{label:"Thời gian"},{default:o(()=>[a(u,{modelValue:n.dataTransaction.time,"onUpdate:modelValue":t[4]||(t[4]=s=>n.dataTransaction.time=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}const X=b(L,[["render",U]]);export{X as default};
