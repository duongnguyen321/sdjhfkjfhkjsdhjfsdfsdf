import{a as V,b as _,l as v,c as S}from"./coin-DsvuaeH_.js";import{_ as B,u as w,b as T,c as U,e,w as t,h as r,o as q,i as m,d as f,t as p}from"./index-QQhhOUTB.js";import"./index-CdjHlNDK.js";const I={data(){return{dialogCoin:!1,dataCoin:{name:"",unit:"",quantity:null,icon:"",qrCoin:"",walletAddress:"",moneySell:null,serviceChargeSell:null,statusSell:null,moneyBuy:null,serviceChargeBuy:null,statusBuy:null,min:null},dataListCoin:[],isEditForm:!1,uploadImg:w,baseImg:T}},created(){this.getListCoin()},methods:{successQRCoin(a){a.message==="Success"&&(this.dataCoin.qrCoin=a.file.filename)},successImage(a){a.message==="Success"&&(this.dataCoin.icon=a.file.filename)},openDialogCoin(a,o){this.isEditForm=a,this.dialogCoin=!0,o.length!==0?this.dataCoin={...o}:this.dataCoin={name:"",unit:"",quantity:null,icon:"",qrCoin:"",walletAddress:"",moneySell:null,serviceChargeSell:null,statusSell:null,moneyBuy:null,serviceChargeBuy:null,statusBuy:null,min:null}},updateCoin(){this.dialogCoin=!1,V(this.dataCoin._id,this.dataCoin).then(()=>{this.$message.success("Cập nhật thành công"),this.getListCoin()})},addCoin(){this.dialogCoin=!1,_(this.dataCoin).then(()=>{this.$message.success("Thêm thành công"),this.getListCoin()})},getListCoin(){v().then(a=>{this.dataListCoin=a})},deleteCoin(a){S(a._id).then(()=>{this.$message.success("Xóa thành công"),this.getListCoin()})},formatCurrency(a){return`${a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")} VND`}}},k={class:"over pt-8"},L=["src"],M=["src"],x={class:"dialog-footer"};function A(a,o,D,E,n,s){const C=r("el-button"),i=r("el-table-column"),g=r("el-table"),d=r("el-input"),u=r("el-form-item"),c=r("el-upload"),b=r("el-form"),h=r("el-dialog");return q(),U("div",k,[e(C,{onClick:o[0]||(o[0]=l=>s.openDialogCoin(!1,""))},{default:t(()=>[m("Thêm Coin")]),_:1}),e(g,{data:n.dataListCoin,style:{width:"100%"},class:"mt-4",border:!0},{default:t(()=>[e(i,{prop:"name",label:"Tên"}),e(i,{prop:"unit",label:"Đơn vị"}),e(i,{prop:"quantity",label:"Tổng đang có"}),e(i,{label:"Icon"},{default:t(l=>[f("img",{src:n.baseImg+l.row.icon,alt:"coin"},null,8,L)]),_:1}),e(i,{label:"QR Coin"},{default:t(l=>[f("img",{src:n.baseImg+l.row.qrCoin,alt:"qrcoin"},null,8,M)]),_:1}),e(i,{prop:"walletAddress",label:"Địa chỉ ví nhận coin"}),e(i,{label:"Tiền bán",prop:"moneySell"},{default:t(l=>[m(p(s.formatCurrency(l.row.moneySell)),1)]),_:1}),e(i,{label:"Phí bán coin",prop:"serviceChargeSell"},{default:t(l=>[m(p(s.formatCurrency(l.row.serviceChargeSell)),1)]),_:1}),e(i,{label:"Trạng thái bán",prop:"statusSell"}),e(i,{label:"Tiền mua",prop:"moneyBuy"},{default:t(l=>[m(p(s.formatCurrency(l.row.moneyBuy)),1)]),_:1}),e(i,{label:"Phí mua coin",prop:"serviceChargeBuy"},{default:t(l=>[m(p(s.formatCurrency(l.row.serviceChargeBuy)),1)]),_:1}),e(i,{label:"Trạng thái mua",prop:"statusBuy"}),e(i,{label:"Giá trị mua nhỏ nhất",prop:"min"}),e(i,{label:"Thao tác","min-width":"150px"},{default:t(l=>[e(C,{onClick:y=>s.openDialogCoin(!0,l.row)},{default:t(()=>[m(" Sửa ")]),_:2},1032,["onClick"]),e(C,{onClick:y=>s.deleteCoin(l.row)},{default:t(()=>[m(" Xóa ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(h,{modelValue:n.dialogCoin,"onUpdate:modelValue":o[16]||(o[16]=l=>n.dialogCoin=l),title:n.isEditForm?"Sửa thông tin":"Thêm mới",width:"500"},{footer:t(()=>[f("div",x,[e(C,{onClick:o[14]||(o[14]=l=>n.dialogCoin=!1)},{default:t(()=>[m("Cancel")]),_:1}),e(C,{type:"primary",onClick:o[15]||(o[15]=l=>n.isEditForm?s.updateCoin():s.addCoin())},{default:t(()=>[m(p(n.isEditForm?"Cập nhật":"Xác nhận"),1)]),_:1})])]),default:t(()=>[e(b,{"label-width":"auto",class:"demo-ruleForm mt-4"},{default:t(()=>[e(u,{label:"Tên Coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.name,"onUpdate:modelValue":o[1]||(o[1]=l=>n.dataCoin.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"Đơn vị"},{default:t(()=>[e(d,{modelValue:n.dataCoin.unit,"onUpdate:modelValue":o[2]||(o[2]=l=>n.dataCoin.unit=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Tổng số coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.quantity,"onUpdate:modelValue":o[3]||(o[3]=l=>n.dataCoin.quantity=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Icon coin"},{default:t(()=>[e(c,{modelValue:n.dataCoin.icon,"onUpdate:modelValue":o[4]||(o[4]=l=>n.dataCoin.icon=l),name:"image",class:"upload-demo",action:n.uploadImg,"on-success":s.successImage},{default:t(()=>[e(C,{type:"primary"},{default:t(()=>[m("Thêm ảnh")]),_:1})]),_:1},8,["modelValue","action","on-success"])]),_:1}),e(u,{label:"QR Coin"},{default:t(()=>[e(c,{modelValue:n.dataCoin.qrCoin,"onUpdate:modelValue":o[5]||(o[5]=l=>n.dataCoin.qrCoin=l),name:"image",class:"upload-demo",action:n.uploadImg,"on-success":s.successQRCoin},{default:t(()=>[e(C,{type:"primary"},{default:t(()=>[m("Thêm ảnh")]),_:1})]),_:1},8,["modelValue","action","on-success"])]),_:1}),e(u,{label:"Địa chỉ ví nhận coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.walletAddress,"onUpdate:modelValue":o[6]||(o[6]=l=>n.dataCoin.walletAddress=l)},null,8,["modelValue"])]),_:1}),e(u,{label:"Số tiền bán coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.moneySell,"onUpdate:modelValue":o[7]||(o[7]=l=>n.dataCoin.moneySell=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"Phí giao dịch bán coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.serviceChargeSell,"onUpdate:modelValue":o[8]||(o[8]=l=>n.dataCoin.serviceChargeSell=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Trạng thái bán"},{default:t(()=>[e(d,{modelValue:n.dataCoin.statusSell,"onUpdate:modelValue":o[9]||(o[9]=l=>n.dataCoin.statusSell=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Số tiền mua coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.moneyBuy,"onUpdate:modelValue":o[10]||(o[10]=l=>n.dataCoin.moneyBuy=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Phí giao dịch mua coin"},{default:t(()=>[e(d,{modelValue:n.dataCoin.serviceChargeBuy,"onUpdate:modelValue":o[11]||(o[11]=l=>n.dataCoin.serviceChargeBuy=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Trạng thái mua"},{default:t(()=>[e(d,{modelValue:n.dataCoin.statusBuy,"onUpdate:modelValue":o[12]||(o[12]=l=>n.dataCoin.statusBuy=l),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1}),e(u,{label:"Giá trị mua nhỏ nhất"},{default:t(()=>[e(d,{modelValue:n.dataCoin.min,"onUpdate:modelValue":o[13]||(o[13]=l=>n.dataCoin.min=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])])}const Q=B(I,[["render",A]]);export{Q as default};
